<!DOCTYPE html>
<html>
  <head>
    <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
  -->
    <base href="$FLUTTER_BASE_HREF" />

    <meta charset="UTF-8" />
    <meta content="IE=Edge" http-equiv="X-UA-Compatible" />
    <meta name="description" content="A new Flutter project." />

    <!-- iOS meta tags & icons -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="water_sensor" />
    <link rel="apple-touch-icon" href="icons/Icon-192.png" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png" />

    <script src="https://cdn.jsdelivr.net/gh/Knightro63/flutter_angle/assets/gles_bindings.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>water_sensor</title>
    <link rel="manifest" href="manifest.json" />
    <script
      type="module"
      src="assets/packages/model_viewer_plus/assets/model-viewer.min.js"
      defer
    ></script>
    <script defer src="flutter.js"></script>
    <script>
      window.setMatColor = function (name, r, g, b, a) {
        const mv = document.querySelector("model-viewer");
        if (!mv || !mv.model) {
          console.warn("model-viewer эсвэл model бэлэн биш байна");
          return;
        }
        const mat = mv.model.materials.find((m) => m.name === name);
        if (!mat) {
          console.warn("material олдсонгүй:", name);
          return;
        }
        if (a < 1.0) {
          // тунгалаг болгох үед
          if (mat.setAlphaMode) {
            mat.setAlphaMode("BLEND"); // model-viewer-ийн scene-graph API
          } else if ("alphaMode" in mat) {
            mat.alphaMode = "BLEND";
          }
        } else {
          // бүрэн opaque болгох үед
          if (mat.setAlphaMode) {
            mat.setAlphaMode("OPAQUE");
          } else if ("alphaMode" in mat) {
            mat.alphaMode = "OPAQUE";
          }
        }
        mat.pbrMetallicRoughness.setBaseColorFactor([r, g, b, a]);
      };

      window.initGarageColors = function () {
        function tryInit() {
          const mv = document.querySelector("model-viewer");
          if (!mv || !mv.model) {
            // model ачаалагдаагүй байвал бага зэрэг хүлээгээд дахин шалгана
            requestAnimationFrame(tryInit);
            return;
          }
          window.setMatColor("0100", 1.0, 0.7783, 0.4235, 0.5);
          window.setMatColor("0101", 1.0, 0.7783, 0.4235, 0.5);
          window.setMatColor("0102", 1.0, 0.7783, 0.4235, 0.5);
          window.setMatColor("0103", 1.0, 0.4529, 0.4529, 0.5);
          window.setMatColor("0104", 1.0, 0.4529, 0.4529, 0.5);
          window.setMatColor("0105", 1.0, 0.4529, 0.4529, 0.5);
          window.setMatColor("0106", 1.0, 0.8856, 0.4088, 0.5);
          window.setMatColor("0107", 1.0, 0.8856, 0.4088, 0.5);
          window.setMatColor("0200", 1.0, 0.8856, 0.4088, 0.5);
          window.setMatColor("0201", 0.7118, 1.0, 0.4235, 0.5);
          window.setMatColor("0202", 0.7118, 1.0, 0.4235, 0.5);
          window.setMatColor("0203", 0.7118, 1.0, 0.4235, 0.5);
          window.setMatColor("0204", 0.4235, 1.0, 0.7783, 0.5);
          window.setMatColor("0205", 0.4235, 1.0, 0.7783, 0.5);
          window.setMatColor("0206", 0.4235, 1.0, 0.7783, 0.5);
          window.setMatColor("0207", 0.4235, 1.0, 0.7783, 0.5);
          window.setMatColor("0300", 0.4235, 1.0, 0.7783, 0.5);
          window.setMatColor("0301", 0.4235, 0.8005, 1.0, 0.5);
          window.setMatColor("0302", 0.4235, 0.8005, 1.0, 0.5);
          window.setMatColor("0303", 0.4235, 0.8005, 1.0, 0.5);
          window.setMatColor("0304", 0.4235, 0.8005, 1.0, 0.5);
          window.setMatColor("0305", 0.4235, 0.8005, 1.0, 0.5);
          window.setMatColor("0306", 0.6009, 0.4235, 1.0, 0.5);
          window.setMatColor("0307", 0.6009, 0.4235, 1.0, 0.5);
          window.setMatColor("0400", 0.6009, 0.4235, 1.0, 0.5);
          window.setMatColor("0401", 0.6009, 0.4235, 1.0, 0.5);
          window.setMatColor("0402", 0.6009, 0.4235, 1.0, 0.5);
          window.setMatColor("0403", 0.9113, 0.4235, 1.0, 0.5);
          window.setMatColor("0404", 0.9113, 0.4235, 1.0, 0.5);
          window.setMatColor("0405", 0.9113, 0.4235, 1.0, 0.5);
          window.setMatColor("0406", 0.9113, 0.4235, 1.0, 0.5);
          window.setMatColor("0407", 1.0, 0.4235, 0.7118, 0.5);
          window.setMatColor("0500", 1.0, 0.4235, 0.7118, 0.5);
          window.setMatColor("0501", 1.0, 0.4235, 0.7118, 0.5);
          window.setMatColor("0502", 1.0, 0.4235, 0.7118, 0.5);
          window.setMatColor("0503", 0.4235, 1.0, 0.8891, 0.5);
          window.setMatColor("0504", 0.4235, 1.0, 0.8891, 0.5);
          window.setMatColor("0505", 0.4235, 1.0, 0.8891, 0.5);
          window.setMatColor("0506", 0.4235, 1.0, 0.8891, 0.5);
          window.setMatColor("0507", 0.4382, 0.5987, 1.0, 0.5);
          window.setMatColor("0600", 0.4382, 0.5987, 1.0, 0.5);
          window.setMatColor("0601", 0.4382, 0.5987, 1.0, 0.5);
          window.setMatColor("0602", 0.4382, 0.5987, 1.0, 0.5);
          window.setMatColor("0603", 0.4382, 0.5987, 1.0, 0.5);
          window.setMatColor("0604", 0.4235, 1.0, 0.49, 0.5);
          window.setMatColor("0605", 0.4235, 1.0, 0.49, 0.5);
          window.setMatColor("0606", 0.4235, 1.0, 0.49, 0.5);
          window.setMatColor("0607", 0.4235, 1.0, 0.49, 0.5);
          window.setMatColor("0700", 0.4235, 1.0, 0.49, 0.5);
          window.setMatColor("0701", 1.0, 0.4559, 0.6373, 0.5);
          window.setMatColor("0702", 1.0, 0.4559, 0.6373, 0.5);
          window.setMatColor("0703", 1.0, 0.4559, 0.6373, 0.5);
          window.setMatColor("0704", 1.0, 0.4559, 0.6373, 0.5);
          window.setMatColor("0705", 1.0, 0.4559, 0.6373, 0.5);
          window.setMatColor("0706", 0.7147, 0.7147, 0.7147, 0.5);
          window.setMatColor("0707", 0.7147, 0.7147, 0.7147, 0.5);
          window.setMatColor("0800", 0.7147, 0.7147, 0.7147, 0.5);
          window.setMatColor("0801", 0.7147, 0.7147, 0.7147, 0.5);
          window.setMatColor("0802", 0.7147, 0.7147, 0.7147, 0.5);

          window.setMatColor("wall", 0.92, 0.91, 0.88, 1.0);
          window.setMatColor("base", 0.42, 0.45, 0.5, 1.0);
          window.setMatColor("car", 0.13, 0.13, 0.14, 1.0);
          window.setMatColor("tree", 0.15, 0.27, 0.15, 1.0);
          window.setMatColor("blocks_floor", 0.2, 0.2, 0.21, 1.0);
          window.setMatColor("garage_floor", 0.5, 0.5, 0.5, 1.0);
        }

        tryInit();
      };
    </script>
  </head>
  <body>
    <script src="flutter_bootstrap.js" async></script>
  </body>
</html>
